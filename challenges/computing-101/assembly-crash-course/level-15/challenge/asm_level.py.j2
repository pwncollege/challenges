{% raw %}
class ASMLevel20(ASMBase):
    """
    Swap registers_use
    """

    init_rdi = random.randint(1000000, 1000000000)
    init_rsi = random.randint(1000000, 1000000000)

    dynamic_values = True
    stack_use = True
    whitelist = ["push", "pop"]

    @property
    def description(self):
        return f"""
        In this level we are going to explore the last in first out (LIFO) property of the stack.

        Using only following instructions:
          push, pop

        Swap values in rdi and rsi.
        i.e.
        If to start rdi = 2 and rsi = 5
        Then to end rdi = 5 and rsi = 2

        We will now set the following in preparation for your code:
          rdi = {hex(self.init_rdi)}
          rsi = {hex(self.init_rsi)}
        """

    def trace(self):
        self.start()
        yield self.rsi == self.init_rdi, f"rsi expected to be {hex(self.init_rdi)}, but was {hex(self.rsi)} instead"
        yield self.rdi == self.init_rsi, f"rdi expected to be {hex(self.init_rsi)}, but was {hex(self.rdi)} instead"
{% endraw %}
